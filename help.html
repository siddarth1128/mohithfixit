<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help & Support - FixItNow</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1e3c72;
            --secondary: #ff6b6b;
            --accent: #4ecdc4;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --dark: #2d3436;
            --light: #f8f9fa;
            --gray: #6c757d;
            --sidebar-width: 260px;
            --header-height: 70px;
            --border-radius: 12px;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            --shadow-hover: 0 10px 25px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: #f5f7fb;
            color: var(--dark);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 100;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .sidebar.collapsed {
            width: 80px;
        }

        .sidebar.collapsed .sidebar-logo span,
        .sidebar.collapsed .menu-item span,
        .sidebar.collapsed .user-info {
            display: none;
        }

        .sidebar.collapsed .sidebar-header {
            justify-content: center;
            padding: 25px 10px;
        }

        .sidebar.collapsed .menu-item {
            padding: 14px 25px;
            justify-content: center;
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
        }

        .sidebar-logo {
            font-weight: 800;
            font-size: 24px;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
            overflow: hidden;
        }

        .sidebar-logo i {
            color: var(--secondary);
            font-size: 26px;
            flex-shrink: 0;
        }

        .sidebar-menu {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
            transition: var(--transition);
        }

        .menu-item {
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: #555;
            text-decoration: none;
            transition: var(--transition);
            border-left: 4px solid transparent;
            white-space: nowrap;
            overflow: hidden;
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(30, 60, 114, 0.05);
            color: var(--primary);
            border-left-color: var(--primary);
        }

        .menu-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
            flex-shrink: 0;
        }

        .menu-item.active i {
            color: var(--primary);
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
            flex-shrink: 0;
        }

        .user-info {
            white-space: nowrap;
            overflow: hidden;
            transition: var(--transition);
        }

        .user-info h4 {
            font-size: 15px;
            margin-bottom: 3px;
        }

        .user-info p {
            font-size: 12px;
            color: var(--gray);
        }

        /* User Profile Panel */
        .user-profile-panel {
            position: fixed;
            bottom: 90px;
            left: 20px;
            width: 300px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            overflow: hidden;
        }

        .user-profile-panel.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        .user-profile-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), #2a5298);
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
            color: white;
        }

        .user-profile-info h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .user-profile-info p {
            font-size: 13px;
            opacity: 0.9;
        }

        .user-profile-menu {
            padding: 15px 0;
        }

        .profile-menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #555;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
        }

        .profile-menu-item:hover {
            background: rgba(30, 60, 114, 0.05);
            color: var(--primary);
        }

        .profile-menu-item i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .profile-menu-divider {
            height: 1px;
            background: #f0f0f0;
            margin: 10px 0;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
        }

        .main-content.expanded {
            margin-left: 80px;
        }

        /* Header Styles */
        .header {
            height: var(--header-height);
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            position: sticky;
            top: 0;
            z-index: 99;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-left h1 {
            font-size: 24px;
            color: var(--primary);
            font-weight: 700;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 10px 15px 10px 40px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            width: 250px;
            font-size: 14px;
            transition: var(--transition);
        }

        .search-box input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }

        .notification-icon {
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .notification-icon:hover {
            background: #e9ecef;
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--secondary);
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Search Results Panel */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            margin-top: 5px;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .search-result-item:hover {
            background: #f8f9fa;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .search-result-desc {
            font-size: 12px;
            color: #777;
        }

        /* Notifications Panel */
        .notifications-panel {
            position: absolute;
            top: 100%;
            right: 0;
            width: 350px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            margin-top: 5px;
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .notifications-panel.active {
            display: block;
        }

        .notifications-header {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notifications-header h3 {
            font-size: 16px;
            color: var(--dark);
        }

        .mark-all-read {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 13px;
            cursor: pointer;
            font-weight: 500;
        }

        .notification-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            gap: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .notification-item:hover {
            background: #f8f9fa;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-item.unread {
            background: rgba(30, 60, 114, 0.03);
        }

        .notification-icon-small {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(30, 60, 114, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 14px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .notification-desc {
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .notification-time {
            font-size: 11px;
            color: #999;
        }

        .no-notifications {
            padding: 30px 20px;
            text-align: center;
            color: #777;
        }

        /* Sidebar Toggle */
        .sidebar-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            margin-right: 10px;
        }

        .sidebar-toggle:hover {
            background: #e9ecef;
        }

        /* Theme Toggle */
        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: #e9ecef;
        }

        /* Help Content */
        .help-content {
            padding: 30px;
        }

        .help-header {
            background: linear-gradient(135deg, var(--primary), #2a5298);
            color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 30px rgba(30, 60, 114, 0.3);
            position: relative;
            overflow: hidden;
        }

        .help-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .help-title {
            font-size: 28px;
            font-weight: 700;
            z-index: 1;
        }

        .help-subtitle {
            opacity: 0.9;
            margin-top: 5px;
            z-index: 1;
        }

        .help-illustration {
            font-size: 80px;
            opacity: 0.8;
            z-index: 1;
        }

        /* Help Container */
        .help-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .help-tabs {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 25px;
            overflow-x: auto;
        }

        .help-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            font-size: 15px;
            font-weight: 500;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            border-bottom: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .help-tab:hover {
            color: var(--primary);
        }

        .help-section {
            display: none;
            margin-bottom: 30px;
        }

        .help-section.active {
            display: block;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            font-size: 22px;
        }

        /* FAQ Styles */
        .faq-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .faq-item {
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
            transition: var(--transition);
        }

        .faq-item:hover {
            background: #f1f3f5;
        }

        .faq-question {
            padding: 18px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .faq-question:hover {
            background: #e9ecef;
        }

        .faq-question i {
            transition: var(--transition);
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: var(--transition);
        }

        .faq-item.active .faq-answer {
            padding: 0 20px 20px;
            max-height: 500px;
        }

        /* Contact Options */
        .contact-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .contact-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid #e0e0e0;
        }

        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary);
        }

        .contact-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(30, 60, 114, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: var(--primary);
            font-size: 28px;
        }

        .contact-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .contact-card p {
            color: var(--gray);
            margin-bottom: 15px;
            font-size: 14px;
        }

        .contact-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .contact-btn:hover {
            background: #152a52;
            transform: translateY(-2px);
        }

        /* Resource Grid */
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .resource-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid #e0e0e0;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary);
        }

        .resource-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: rgba(30, 60, 114, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: var(--primary);
            font-size: 24px;
        }

        .resource-card h4 {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .resource-card p {
            font-size: 13px;
            color: var(--gray);
        }

        /* Help Actions */
        .help-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #152a52;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid #e0e0e0;
            color: var(--dark);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .search-box input {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .header {
                padding: 0 20px;
            }
            
            .search-box {
                display: none;
            }
            
            .help-header {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .help-illustration {
                font-size: 70px;
            }
            
            .help-tabs {
                flex-wrap: wrap;
            }
            
            .contact-options {
                grid-template-columns: 1fr;
            }
            
            .resource-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .help-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 576px) {
            .help-content {
                padding: 20px 15px;
            }
            
            .help-container {
                padding: 20px;
            }
            
            .resource-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .menu-toggle:hover {
            color: var(--secondary);
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }
        }

        /* Toast Notification */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
        }

        .toast {
            background: white;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 350px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--danger);
        }

        .toast.warning {
            border-left: 4px solid var(--warning);
        }

        .toast.info {
            border-left: 4px solid var(--primary);
        }

        .toast-icon {
            font-size: 20px;
        }

        .toast.success .toast-icon {
            color: var(--success);
        }

        .toast.error .toast-icon {
            color: var(--danger);
        }

        .toast.warning .toast-icon {
            color: var(--warning);
        }

        .toast.info .toast-icon {
            color: var(--primary);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .toast-message {
            font-size: 14px;
            color: var(--gray);
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 16px;
            color: var(--gray);
            cursor: pointer;
        }

        /* Search Highlight */
        .search-highlight {
            background-color: #fff9c4;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .faq-item.highlight {
            background: rgba(30, 60, 114, 0.05);
            border: 1px solid rgba(30, 60, 114, 0.2);
        }

        /* Favorite Button */
        .favorite-btn {
            background: none;
            border: none;
            color: #ccc;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
            transition: color 0.3s ease;
        }

        .favorite-btn:hover {
            color: var(--warning);
        }

        .favorite-btn.active {
            color: var(--warning);
        }

        /* Help History */
        .help-history {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .history-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .history-item:hover {
            background: #f8f9fa;
        }

        .history-item i {
            color: var(--primary);
        }

        /* Rating System */
        .rating-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .rating-prompt {
            margin-bottom: 15px;
            font-weight: 500;
        }

        .rating-stars {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }

        .rating-stars i {
            font-size: 20px;
            color: #e0e0e0;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .rating-stars i.active {
            color: var(--warning);
        }

        .feedback-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 15px;
            resize: vertical;
            min-height: 80px;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }

        .feedback-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quick-action-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Live Chat Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .chat-container {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            max-height: 400px;
        }

        .chat-message {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
        }

        .chat-message.user {
            justify-content: flex-end;
        }

        .message-bubble {
            background: #f1f3f5;
            padding: 12px 15px;
            border-radius: 18px;
            max-width: 70%;
        }

        .chat-message.user .message-bubble {
            background: var(--primary);
            color: white;
        }

        .chat-input {
            display: flex;
            gap: 10px;
            padding: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 24px;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }

        .chat-input input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        .send-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .send-btn:hover {
            background: #152a52;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Emergency Help */
        .emergency-card {
            background: linear-gradient(135deg, var(--danger), #e55c5c);
            color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(229, 92, 92, 0.3);
        }

        .emergency-card h3 {
            font-size: 20px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .emergency-card p {
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .emergency-btn {
            background: white;
            color: var(--danger);
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .emergency-btn:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
        }

        /* Advanced UI Enhancements */
        .skeleton-loader {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-card {
            height: 150px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }

        .skeleton-text {
            height: 16px;
            margin-bottom: 10px;
        }

        .skeleton-text.short {
            width: 60%;
        }

        .offline-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--danger);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
        }

        .offline-indicator.active {
            display: block;
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 10;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .search-suggestions.active {
            display: block;
        }

        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
        }

        .suggestion-item:hover {
            background: #f8f9fa;
        }

        .help-categories {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid #e0e0e0;
            text-align: center;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary);
        }

        .category-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(30, 60, 114, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: var(--primary);
            font-size: 28px;
        }

        .category-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .category-card p {
            color: var(--gray);
            font-size: 14px;
        }

        .knowledge-base {
            margin-top: 30px;
        }

        .kb-categories {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .kb-category {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .kb-category:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .kb-category h4 {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kb-articles {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .kb-article {
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kb-article:hover {
            background: #f8f9fa;
        }

        .kb-article i {
            color: var(--primary);
            font-size: 14px;
        }

        .support-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: var(--border-radius);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success);
        }

        .status-indicator.busy {
            background: var(--warning);
        }

        .status-indicator.offline {
            background: var(--danger);
        }

        .support-agents {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .agent-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .agent-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .agent-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin: 0 auto 10px;
        }

        .agent-card h4 {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .agent-card p {
            font-size: 13px;
            color: var(--gray);
            margin-bottom: 10px;
        }

        .agent-status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 12px;
            display: inline-block;
        }

        .agent-status.online {
            background: rgba(46, 204, 113, 0.1);
            color: var(--success);
        }

        .agent-status.busy {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning);
        }

        .auto-save-indicator {
            font-size: 12px;
            color: var(--success);
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .auto-save-indicator.show {
            opacity: 1;
        }

        .help-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--gray);
            font-size: 14px;
        }

        .help-progress {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .progress-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(30, 60, 114, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .progress-info {
            flex: 1;
        }

        .progress-info h4 {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 6px;
            background: #f0f0f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Animation for user profile panel */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dark Mode Styles */
        body.dark-theme {
            --dark: #f8f9fa;
            --light: #2d3436;
            background: #1a1d23;
            color: #f8f9fa;
        }
        
        body.dark-theme .sidebar,
        body.dark-theme .header,
        body.dark-theme .help-container,
        body.dark-theme .card,
        body.dark-theme .contact-card,
        body.dark-theme .resource-card,
        body.dark-theme .category-card,
        body.dark-theme .kb-category,
        body.dark-theme .agent-card,
        body.dark-theme .stat-card,
        body.dark-theme .faq-item,
        body.dark-theme .modal-content,
        body.dark-theme .toast,
        body.dark-theme .user-profile-panel,
        body.dark-theme .notifications-panel,
        body.dark-theme .search-results,
        body.dark-theme .search-suggestions {
            background: #2d3436;
            color: #f8f9fa;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        body.dark-theme .menu-item,
        body.dark-theme .profile-menu-item {
            color: #ddd;
        }
        
        body.dark-theme .menu-item:hover,
        body.dark-theme .menu-item.active,
        body.dark-theme .profile-menu-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #f8f9fa;
        }
        
        body.dark-theme .search-box input,
        body.dark-theme .notification-icon,
        body.dark-theme .theme-toggle,
        body.dark-theme .sidebar-toggle,
        body.dark-theme .quick-action-btn,
        body.dark-theme .btn-outline,
        body.dark-theme .feedback-input,
        body.dark-theme .chat-input input {
            background: #3a4047;
            color: #f8f9fa;
            border-color: #444;
        }
        
        body.dark-theme .search-box input:focus,
        body.dark-theme .feedback-input:focus,
        body.dark-theme .chat-input input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.3);
        }
        
        body.dark-theme .faq-item,
        body.dark-theme .contact-card,
        body.dark-theme .resource-card,
        body.dark-theme .category-card,
        body.dark-theme .kb-category,
        body.dark-theme .agent-card,
        body.dark-theme .stat-card {
            background: #3a4047;
        }
        
        body.dark-theme .faq-item:hover,
        body.dark-theme .contact-card:hover,
        body.dark-theme .resource-card:hover,
        body.dark-theme .category-card:hover,
        body.dark-theme .kb-category:hover,
        body.dark-theme .agent-card:hover,
        body.dark-theme .stat-card:hover {
            background: #444950;
        }
        
        body.dark-theme .notification-item:hover,
        body.dark-theme .search-result-item:hover,
        body.dark-theme .suggestion-item:hover,
        body.dark-theme .history-item:hover,
        body.dark-theme .kb-article:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        body.dark-theme .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        body.dark-theme .help-subtitle,
        body.dark-theme .stat-label,
        body.dark-theme .section-title,
        body.dark-theme .contact-card p,
        body.dark-theme .resource-card p,
        body.dark-theme .category-card p,
        body.dark-theme .agent-card p,
        body.dark-theme .toast-message,
        body.dark-theme .auto-save-indicator {
            color: #aaa;
        }
        
        body.dark-theme .help-tabs {
            border-color: #444;
        }
        
        body.dark-theme .help-actions {
            border-color: #444;
        }
        
        body.dark-theme .help-history {
            border-color: #444;
        }
        
        body.dark-theme .rating-section {
            border-color: #444;
        }
        
        body.dark-theme .support-status {
            background: #3a4047;
        }
        
        body.dark-theme .progress-bar {
            background: #444;
        }
        
        body.dark-theme .message-bubble {
            background: #3a4047;
            color: #f8f9fa;
        }
        
        body.dark-theme .chat-message.user .message-bubble {
            background: var(--primary);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        <i class="fas fa-wifi"></i> You are currently offline
    </div>

    <!-- User Profile Panel -->
    <div class="user-profile-panel" id="userProfilePanel">
        <div class="user-profile-header">
            <div class="user-profile-avatar" id="profileAvatar">JS</div>
            <div class="user-profile-info">
                <h3 id="profileName">John Smith</h3>
                <p id="profileType">Premium Member</p>
            </div>
        </div>
        <div class="user-profile-menu">
            <a href="profile.html" class="profile-menu-item">
                <i class="fas fa-user"></i>
                My Profile
            </a>
            <a href="setting.html" class="profile-menu-item">
                <i class="fas fa-cog"></i>
                Account Settings
            </a>
            <a href="payment.html" class="profile-menu-item">
                <i class="fas fa-credit-card"></i>
                Payment Methods
            </a>
            <div class="profile-menu-divider"></div>
            <a href="#" class="profile-menu-item" id="switchAccountBtn">
                <i class="fas fa-sync-alt"></i>
                Switch Account
            </a>
            <a href="#" class="profile-menu-item" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </a>
        </div>
    </div>

    <!-- Live Chat Modal -->
    <div class="modal-overlay" id="chatModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Live Chat Support</h3>
                <button class="close-modal" id="closeChat">&times;</button>
            </div>
            <div class="chat-container" id="chatMessages">
                <div class="chat-message">
                    <div class="message-bubble">
                        Hello! Thank you for contacting FixItNow support. How can I help you today?
                    </div>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" placeholder="Type your message..." id="chatInput">
                <button class="send-btn" id="sendMessage">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="dashboard.html" class="sidebar-logo">
                <i class="fas fa-tools"></i>
                <span>FixItNow</span>
            </a>
        </div>
        
        <div class="sidebar-menu">
            <a href="dashboard.html" class="menu-item">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="book_service.html" class="menu-item">
                <i class="fas fa-calendar-alt"></i>
                <span>Book Services</span>
            </a>
            <a href="service_history.html" class="menu-item">
                <i class="fas fa-history"></i>
                <span>Service History</span>
            </a>
            <a href="invoice.html" class="menu-item">
                <i class="fas fa-file-invoice-dollar"></i>
                <span>Invoices</span>
            </a>
            <a href="review.html" class="menu-item">
                <i class="fas fa-star"></i>
                <span>Reviews</span>
            </a>
            <a href="profile.html" class="menu-item">
                <i class="fas fa-user-circle"></i>
                <span>Profile</span>
            </a>
            <a href="setting.html" class="menu-item">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
            <a href="#" class="menu-item active">
                <i class="fas fa-question-circle"></i>
                <span>Help & Support</span>
            </a>
        </div>
        
        <div class="sidebar-footer" id="userProfileSection">
            <div class="user-profile">
                <div class="user-avatar" id="userAvatar">JS</div>
                <div class="user-info">
                    <h4 id="userName">John Smith</h4>
                    <p id="userType">Premium Member</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1>Help & Support</h1>
            </div>
            
            <div class="header-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search for help..." id="helpSearch">
                    <div class="search-suggestions" id="searchSuggestions">
                        <!-- Search suggestions will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </div>
                
                <div class="notification-icon" id="notificationIcon">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notificationBadge">3</span>
                    <div class="notifications-panel" id="notificationsPanel">
                        <div class="notifications-header">
                            <h3>Notifications</h3>
                            <button class="mark-all-read" id="markAllRead">Mark all as read</button>
                        </div>
                        <div id="notificationsList">
                            <!-- Notifications will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Help Content -->
        <div class="help-content">
            <!-- Help Header -->
            <div class="help-header">
                <div class="welcome-text">
                    <h2 class="help-title">Help & Support</h2>
                    <p class="help-subtitle">Find answers, get help, and learn how to use FixItNow</p>
                </div>
                <div class="help-illustration">
                    <i class="fas fa-headset"></i>
                </div>
            </div>
            
            <!-- Help Stats -->
            <div class="help-stats">
                <div class="stat-card">
                    <div class="stat-number" id="resolvedIssues">89%</div>
                    <div class="stat-label">Issues Resolved</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgResponseTime">2.4m</div>
                    <div class="stat-label">Avg. Response Time</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="satisfactionRate">4.8</div>
                    <div class="stat-label">Satisfaction Rating</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="supportAgents">12</div>
                    <div class="stat-label">Support Agents Online</div>
                </div>
            </div>
            
            <!-- Emergency Help -->
            <div class="emergency-card">
                <h3><i class="fas fa-ambulance"></i> Emergency Service Help</h3>
                <p>If you have an urgent service issue that requires immediate attention, our emergency support team is available 24/7.</p>
                <button class="emergency-btn" id="emergencyHelp">
                    <i class="fas fa-phone"></i> Call Emergency Support: 1-800-EMERGENCY
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="quick-action-btn" id="popularQuestions">
                    <i class="fas fa-fire"></i> Popular Questions
                </button>
                <button class="quick-action-btn" id="videoTutorials">
                    <i class="fas fa-video"></i> Video Tutorials
                </button>
                <button class="quick-action-btn" id="serviceStatus">
                    <i class="fas fa-info-circle"></i> Service Status
                </button>
                <button class="quick-action-btn" id="communityForum">
                    <i class="fas fa-users"></i> Community Forum
                </button>
                <button class="quick-action-btn" id="requestCallback">
                    <i class="fas fa-phone-volume"></i> Request Callback
                </button>
            </div>
            
            <!-- Help Categories -->
            <div class="help-categories">
                <div class="category-card" data-category="billing">
                    <div class="category-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <h3>Billing & Payments</h3>
                    <p>Questions about invoices, payments, and billing issues</p>
                </div>
                <div class="category-card" data-category="services">
                    <div class="category-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <h3>Services</h3>
                    <p>Help with booking, managing, and understanding services</p>
                </div>
                <div class="category-card" data-category="account">
                    <div class="category-icon">
                        <i class="fas fa-user-cog"></i>
                    </div>
                    <h3>Account & Profile</h3>
                    <p>Managing your account, profile, and settings</p>
                </div>
                <div class="category-card" data-category="technical">
                    <div class="category-icon">
                        <i class="fas fa-laptop-code"></i>
                    </div>
                    <h3>Technical Support</h3>
                    <p>App issues, troubleshooting, and technical problems</p>
                </div>
            </div>
            
            <!-- Help Container -->
            <div class="help-container">
                <div class="help-tabs">
                    <button class="help-tab active" data-tab="faq">
                        <i class="fas fa-question-circle"></i> FAQ
                    </button>
                    <button class="help-tab" data-tab="contact">
                        <i class="fas fa-headset"></i> Contact Us
                    </button>
                    <button class="help-tab" data-tab="resources">
                        <i class="fas fa-book"></i> Resources
                    </button>
                    <button class="help-tab" data-tab="guides">
                        <i class="fas fa-graduation-cap"></i> User Guides
                    </button>
                    <button class="help-tab" data-tab="knowledge">
                        <i class="fas fa-database"></i> Knowledge Base
                    </button>
                    <button class="help-tab" data-tab="history">
                        <i class="fas fa-history"></i> My Help History
                    </button>
                </div>
                
                <!-- FAQ Section -->
                <div class="help-section active" id="faq-section">
                    <h3 class="section-title">
                        <i class="fas fa-question-circle"></i> Frequently Asked Questions
                    </h3>
                    
                    <div class="faq-list" id="faqList">
                        <!-- FAQ items will be dynamically loaded here -->
                    </div>

                    <div class="rating-section">
                        <div class="rating-prompt">Was this helpful?</div>
                        <div class="rating-stars" id="faqRating">
                            <i class="far fa-star" data-rating="1"></i>
                            <i class="far fa-star" data-rating="2"></i>
                            <i class="far fa-star" data-rating="3"></i>
                            <i class="far fa-star" data-rating="4"></i>
                            <i class="far fa-star" data-rating="5"></i>
                        </div>
                        <textarea class="feedback-input" placeholder="Additional feedback (optional)" id="faqFeedback"></textarea>
                        <button class="btn btn-primary" id="submitFeedback">
                            <i class="fas fa-paper-plane"></i> Submit Feedback
                        </button>
                    </div>
                </div>
                
                <!-- Contact Section -->
                <div class="help-section" id="contact-section">
                    <h3 class="section-title">
                        <i class="fas fa-headset"></i> Contact Support
                    </h3>
                    
                    <div class="support-status">
                        <div class="status-indicator online"></div>
                        <span>All support systems are operational</span>
                    </div>
                    
                    <div class="contact-options">
                        <div class="contact-card">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <h3>Phone Support</h3>
                            <p>Speak directly with our support team</p>
                            <p style="font-weight: 600; margin-bottom: 15px;">1-800-FIX-NOW</p>
                            <button class="contact-btn" id="callSupport">
                                <i class="fas fa-phone"></i> Call Now
                            </button>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <h3>Email Support</h3>
                            <p>Send us a detailed message</p>
                            <p style="font-weight: 600; margin-bottom: 15px;">support@fixitnow.com</p>
                            <button class="contact-btn" id="emailSupport">
                                <i class="fas fa-envelope"></i> Send Email
                            </button>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">
                                <i class="fas fa-comments"></i>
                            </div>
                            <h3>Live Chat</h3>
                            <p>Instant messaging with our agents</p>
                            <p style="font-weight: 600; margin-bottom: 15px;">Available 24/7</p>
                            <button class="contact-btn" id="startChat">
                                <i class="fas fa-comments"></i> Start Chat
                            </button>
                        </div>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 40px;">
                        <i class="fas fa-clock"></i> Support Hours
                    </h3>
                    
                    <div class="card">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h4 style="margin-bottom: 10px;">Regular Support</h4>
                                <p>Monday - Friday: 7:00 AM - 10:00 PM</p>
                                <p>Saturday - Sunday: 8:00 AM - 8:00 PM</p>
                            </div>
                            <div>
                                <h4 style="margin-bottom: 10px;">Emergency Support</h4>
                                <p>Available 24/7 for urgent service issues</p>
                                <p>Call: 1-800-EMERGENCY</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 40px;">
                        <i class="fas fa-user-tie"></i> Support Team
                    </h3>
                    
                    <div class="support-agents" id="supportAgents">
                        <!-- Support agent cards will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Resources Section -->
                <div class="help-section" id="resources-section">
                    <h3 class="section-title">
                        <i class="fas fa-book"></i> Helpful Resources
                    </h3>
                    
                    <div class="resource-grid" id="resourceGrid">
                        <!-- Resource cards will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Guides Section -->
                <div class="help-section" id="guides-section">
                    <h3 class="section-title">
                        <i class="fas fa-graduation-cap"></i> User Guides
                    </h3>
                    
                    <div class="card">
                        <h4 style="margin-bottom: 15px;">Getting Started with FixItNow</h4>
                        <p style="margin-bottom: 20px;">New to our platform? Follow these steps to make the most of your FixItNow experience:</p>
                        
                        <ol style="padding-left: 20px; margin-bottom: 20px;">
                            <li style="margin-bottom: 10px;">Complete your profile with accurate contact information</li>
                            <li style="margin-bottom: 10px;">Add your home address for service location</li>
                            <li style="margin-bottom: 10px;">Set your notification preferences in Settings</li>
                            <li style="margin-bottom: 10px;">Browse services and read provider reviews</li>
                            <li style="margin-bottom: 10px;">Book your first service!</li>
                        </ol>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <h4 style="margin-bottom: 15px;">Troubleshooting Common Issues</h4>
                        
                        <div class="faq-list" id="troubleshootingList">
                            <!-- Troubleshooting FAQ items will be dynamically loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Knowledge Base Section -->
                <div class="help-section" id="knowledge-section">
                    <h3 class="section-title">
                        <i class="fas fa-database"></i> Knowledge Base
                    </h3>
                    
                    <div class="knowledge-base">
                        <div class="kb-categories" id="kbCategories">
                            <!-- Knowledge base categories will be dynamically loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Help History Section -->
                <div class="help-section" id="history-section">
                    <h3 class="section-title">
                        <i class="fas fa-history"></i> My Help History
                    </h3>
                    
                    <div class="card">
                        <h4 style="margin-bottom: 15px;">Recently Viewed</h4>
                        <div class="help-history" id="helpHistory">
                            <!-- Help history items will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <h4 style="margin-bottom: 15px;">Favorites</h4>
                        <div class="help-history" id="favoritesList">
                            <!-- Favorite items will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <div class="help-progress">
                        <h4 style="margin-bottom: 15px;">My Support Progress</h4>
                        <div class="progress-item">
                            <div class="progress-icon">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div class="progress-info">
                                <h4>Open Support Tickets</h4>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 20%"></div>
                                </div>
                            </div>
                            <span>1/5</span>
                        </div>
                        <div class="progress-item">
                            <div class="progress-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="progress-info">
                                <h4>Resolved Issues</h4>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 80%"></div>
                                </div>
                            </div>
                            <span>12/15</span>
                        </div>
                        <div class="progress-item">
                            <div class="progress-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="progress-info">
                                <h4>Helpful Articles</h4>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%"></div>
                                </div>
                            </div>
                            <span>9/15</span>
                        </div>
                    </div>
                </div>
                
                <div class="help-actions">
                    <button class="btn btn-outline" id="downloadManual">
                        <i class="fas fa-download"></i> Download User Manual
                    </button>
                    <button class="btn btn-primary" id="submitFeedbackMain">
                        <i class="fas fa-comment"></i> Submit General Feedback
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Help & Support Application
        class HelpSupportApp {
            constructor() {
                this.currentUser = {
                    id: 1,
                    name: "John Smith",
                    initials: "JS",
                    type: "Premium Member",
                    email: "john.smith@example.com",
                    phone: "+1 (555) 123-4567",
                    joinDate: "January 2023"
                };
                
                this.helpData = {
                    faqs: [
                        {
                            id: 1,
                            question: "How do I book a service?",
                            answer: "To book a service, navigate to the 'Book Services' section in the main menu. Select the type of service you need, choose your preferred date and time, and provide details about the issue. Our system will match you with available service providers in your area.",
                            favorite: false,
                            viewed: true,
                            rating: 0,
                            category: "services"
                        },
                        {
                            id: 2,
                            question: "What payment methods do you accept?",
                            answer: "We accept all major credit cards (Visa, MasterCard, American Express), PayPal, and bank transfers. You can securely store your payment method in your account settings for faster checkout.",
                            favorite: true,
                            viewed: true,
                            rating: 0,
                            category: "billing"
                        },
                        {
                            id: 3,
                            question: "Can I cancel or reschedule a service?",
                            answer: "Yes, you can cancel or reschedule services up to 24 hours before the scheduled appointment without any charges. For cancellations within 24 hours, a small fee may apply depending on the service provider's policy.",
                            favorite: false,
                            viewed: false,
                            rating: 0,
                            category: "services"
                        },
                        {
                            id: 4,
                            question: "How are service providers vetted?",
                            answer: "All our service providers undergo a rigorous vetting process including background checks, license verification, and skill assessments. We also monitor customer ratings and reviews to ensure quality service.",
                            favorite: false,
                            viewed: true,
                            rating: 0,
                            category: "services"
                        },
                        {
                            id: 5,
                            question: "What if I'm not satisfied with the service?",
                            answer: "Your satisfaction is guaranteed. If you're not happy with the service provided, contact our support team within 48 hours. We'll work with the service provider to resolve the issue or provide a refund if appropriate.",
                            favorite: true,
                            viewed: false,
                            rating: 0,
                            category: "services"
                        },
                        {
                            id: 6,
                            question: "How do I update my account information?",
                            answer: "You can update your account information by going to the 'Profile' section in the main menu. From there, you can edit your personal details, contact information, and preferences.",
                            favorite: false,
                            viewed: true,
                            rating: 0,
                            category: "account"
                        },
                        {
                            id: 7,
                            question: "What should I do if the app is not working properly?",
                            answer: "If you're experiencing technical issues with the app, try these steps: 1) Restart the app, 2) Check your internet connection, 3) Update to the latest version. If problems persist, contact our technical support team.",
                            favorite: false,
                            viewed: false,
                            rating: 0,
                            category: "technical"
                        }
                    ],
                    resources: [
                        {
                            id: 1,
                            title: "Service Guides",
                            description: "Step-by-step guides for common services",
                            icon: "file-alt",
                            viewed: true,
                            category: "services"
                        },
                        {
                            id: 2,
                            title: "Video Tutorials",
                            description: "Visual guides for using our platform",
                            icon: "video",
                            viewed: false,
                            category: "general"
                        },
                        {
                            id: 3,
                            title: "Pricing Guide",
                            description: "Understand our pricing structure",
                            icon: "balance-scale",
                            viewed: true,
                            category: "billing"
                        },
                        {
                            id: 4,
                            title: "Safety Tips",
                            description: "Important safety information",
                            icon: "shield-alt",
                            viewed: false,
                            category: "services"
                        },
                        {
                            id: 5,
                            title: "DIY Tips",
                            description: "Simple fixes you can do yourself",
                            icon: "tools",
                            viewed: true,
                            category: "services"
                        },
                        {
                            id: 6,
                            title: "Terms & Policies",
                            description: "Our terms of service and policies",
                            icon: "file-contract",
                            viewed: false,
                            category: "general"
                        }
                    ],
                    knowledgeBase: [
                        {
                            category: "Getting Started",
                            articles: [
                                { title: "Creating Your Account", views: 1245 },
                                { title: "Setting Up Your Profile", views: 987 },
                                { title: "Navigating the Dashboard", views: 756 },
                                { title: "Booking Your First Service", views: 1123 }
                            ]
                        },
                        {
                            category: "Billing & Payments",
                            articles: [
                                { title: "Understanding Service Fees", views: 845 },
                                { title: "Payment Methods Accepted", views: 672 },
                                { title: "Reading Your Invoice", views: 534 },
                                { title: "Disputing a Charge", views: 321 }
                            ]
                        },
                        {
                            category: "Service Management",
                            articles: [
                                { title: "Scheduling Services", views: 1567 },
                                { title: "Cancelling or Rescheduling", views: 892 },
                                { title: "Communicating with Providers", views: 745 },
                                { title: "Rating and Reviewing Services", views: 678 }
                            ]
                        },
                        {
                            category: "Account & Security",
                            articles: [
                                { title: "Updating Personal Information", views: 543 },
                                { title: "Changing Password", views: 432 },
                                { title: "Two-Factor Authentication", views: 321 },
                                { title: "Privacy Settings", views: 234 }
                            ]
                        }
                    ],
                    supportAgents: [
                        {
                            id: 1,
                            name: "Sarah Johnson",
                            role: "Senior Support Specialist",
                            status: "online",
                            specialties: ["Billing", "Account Issues"]
                        },
                        {
                            id: 2,
                            name: "Michael Chen",
                            role: "Technical Support",
                            status: "online",
                            specialties: ["App Issues", "Technical Problems"]
                        },
                        {
                            id: 3,
                            name: "Emily Rodriguez",
                            role: "Service Coordinator",
                            status: "busy",
                            specialties: ["Service Booking", "Provider Matching"]
                        },
                        {
                            id: 4,
                            name: "David Wilson",
                            role: "Customer Success Manager",
                            status: "online",
                            specialties: ["Account Management", "Premium Services"]
                        }
                    ],
                    helpHistory: [],
                    favorites: []
                };
                
                this.currentCategoryFilter = "all";
                this.init();
            }
            
            init() {
                this.initializeDashboard();
                this.initializeProfilePanel();
                this.initializeSidebarToggle();
                this.initializeThemeToggle();
                this.initializeToast();
                this.updateNotifications();
                this.loadHelpData();
                this.setupEventListeners();
                this.setupOfflineDetection();
                this.renderFAQs();
                this.renderResources();
                this.renderKnowledgeBase();
                this.renderSupportAgents();
                this.renderHelpHistory();
                this.renderFavorites();
                this.initializeStats();
            }
            
            // Initialize the dashboard with current user data
            initializeDashboard() {
                // Update user information
                document.getElementById('userAvatar').textContent = this.currentUser.initials;
                document.getElementById('userName').textContent = this.currentUser.name;
                document.getElementById('userType').textContent = this.currentUser.type;
                
                document.getElementById('profileAvatar').textContent = this.currentUser.initials;
                document.getElementById('profileName').textContent = this.currentUser.name;
                document.getElementById('profileType').textContent = this.currentUser.type;
            }

            // User profile panel functionality
            initializeProfilePanel() {
                const userProfileSection = document.getElementById('userProfileSection');
                const userProfilePanel = document.getElementById('userProfilePanel');
                const switchAccountBtn = document.getElementById('switchAccountBtn');
                const logoutBtn = document.getElementById('logoutBtn');
                
                if (userProfileSection && userProfilePanel) {
                    userProfileSection.addEventListener('click', function(e) {
                        e.stopPropagation();
                        userProfilePanel.classList.toggle('active');
                    });
                    
                    // Close profile panel when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!e.target.closest('.sidebar-footer') && !e.target.closest('.user-profile-panel')) {
                            userProfilePanel.classList.remove('active');
                        }
                    });
                    
                    // Switch account functionality
                    switchAccountBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        // In a real app, this would show a login modal or redirect to login
                        // For demo purposes, we'll show a message
                        this.showToast('Account switching feature would be implemented here', 'info');
                        userProfilePanel.classList.remove('active');
                    }.bind(this));
                    
                    // Logout functionality
                    logoutBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        // In a real app, this would clear session and redirect to login
                        if (confirm('Are you sure you want to logout?')) {
                            this.showToast('You have been logged out successfully', 'success');
                            // Redirect to login page in a real app
                            // window.location.href = 'login.html';
                        }
                    }.bind(this));
                }
            }

            // Sidebar toggle functionality
            initializeSidebarToggle() {
                const sidebarToggle = document.getElementById('sidebarToggle');
                const menuToggle = document.getElementById('menuToggle');
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                
                if (sidebarToggle && sidebar && mainContent) {
                    sidebarToggle.addEventListener('click', function() {
                        sidebar.classList.toggle('collapsed');
                        mainContent.classList.toggle('expanded');
                        
                        // Change icon based on state
                        const icon = this.querySelector('i');
                        if (sidebar.classList.contains('collapsed')) {
                            icon.className = 'fas fa-chevron-right';
                        } else {
                            icon.className = 'fas fa-bars';
                        }
                    });
                }
                
                // Mobile menu toggle
                if (menuToggle) {
                    menuToggle.addEventListener('click', () => {
                        sidebar.classList.toggle('active');
                    });
                }
            }

            // Theme toggle functionality
            initializeThemeToggle() {
                const themeToggle = document.getElementById('themeToggle');
                const icon = themeToggle.querySelector('i');
                
                // Check for saved theme preference or default to light
                const currentTheme = localStorage.getItem('theme') || 'light';
                if (currentTheme === 'dark') {
                    document.body.classList.add('dark-theme');
                    icon.className = 'fas fa-sun';
                }
                
                themeToggle.addEventListener('click', function() {
                    document.body.classList.toggle('dark-theme');
                    
                    if (document.body.classList.contains('dark-theme')) {
                        localStorage.setItem('theme', 'dark');
                        icon.className = 'fas fa-sun';
                        this.showToast('Dark mode enabled', 'success');
                    } else {
                        localStorage.setItem('theme', 'light');
                        icon.className = 'fas fa-moon';
                        this.showToast('Light mode enabled', 'success');
                    }
                }.bind(this));
            }

            // Toast notification functionality
            initializeToast() {
                const toastContainer = document.getElementById('toastContainer');
                
                // Auto-hide toast after 5 seconds
                toastContainer.addEventListener('animationend', function(e) {
                    if (e.target.classList.contains('show')) {
                        setTimeout(() => {
                            if (e.target.parentNode) {
                                e.target.classList.remove('show');
                                setTimeout(() => {
                                    if (e.target.parentNode) {
                                        e.target.parentNode.removeChild(e.target);
                                    }
                                }, 300);
                            }
                        }, 5000);
                    }
                });
            }
            
            // Setup event listeners
            setupEventListeners() {
                // Tab switching functionality
                const helpTabs = document.querySelectorAll('.help-tab');
                const helpSections = document.querySelectorAll('.help-section');
                
                helpTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const targetTab = tab.getAttribute('data-tab');
                        
                        // Update active tab
                        helpTabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        // Show corresponding section
                        helpSections.forEach(section => {
                            section.classList.remove('active');
                            if (section.id === `${targetTab}-section`) {
                                section.classList.add('active');
                            }
                        });
                    });
                });
                
                // Search functionality
                document.getElementById('helpSearch').addEventListener('input', (e) => {
                    this.handleSearch(e.target.value);
                });
                
                // Quick actions
                document.getElementById('emergencyHelp').addEventListener('click', () => {
                    this.showToast('Calling emergency support: 1-800-EMERGENCY', 'info');
                });
                
                document.getElementById('popularQuestions').addEventListener('click', () => {
                    // Switch to FAQ tab and show popular questions
                    document.querySelector('[data-tab="faq"]').click();
                    this.searchHelp('popular');
                });
                
                document.getElementById('videoTutorials').addEventListener('click', () => {
                    // Switch to resources tab
                    document.querySelector('[data-tab="resources"]').click();
                });
                
                document.getElementById('serviceStatus').addEventListener('click', () => {
                    this.showToast('All systems operational. No reported issues.', 'success');
                });
                
                document.getElementById('communityForum').addEventListener('click', () => {
                    this.showToast('Opening community forum...', 'info');
                });
                
                document.getElementById('requestCallback').addEventListener('click', () => {
                    this.requestCallback();
                });
                
                // Contact options
                document.getElementById('callSupport').addEventListener('click', () => {
                    this.showToast('Calling 1-800-FIX-NOW...', 'info');
                });
                
                document.getElementById('emailSupport').addEventListener('click', () => {
                    this.showToast('Opening email client to send message to support@fixitnow.com...', 'info');
                });
                
                document.getElementById('startChat').addEventListener('click', () => {
                    this.openLiveChat();
                });
                
                // Chat functionality
                document.getElementById('closeChat').addEventListener('click', () => {
                    this.closeLiveChat();
                });
                
                document.getElementById('sendMessage').addEventListener('click', () => {
                    this.sendChatMessage();
                });
                
                document.getElementById('chatInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendChatMessage();
                    }
                });
                
                // Rating functionality
                const ratingStars = document.querySelectorAll('#faqRating i');
                ratingStars.forEach(star => {
                    star.addEventListener('click', () => {
                        const rating = parseInt(star.dataset.rating);
                        
                        // Set active stars
                        ratingStars.forEach((s, index) => {
                            if (index < rating) {
                                s.className = 'fas fa-star active';
                            } else {
                                s.className = 'far fa-star';
                            }
                        });
                    });
                });
                
                // Feedback submission
                document.getElementById('submitFeedback').addEventListener('click', () => {
                    this.submitFAQFeedback();
                });
                
                document.getElementById('submitFeedbackMain').addEventListener('click', () => {
                    this.showToast('Opening feedback form...', 'info');
                });
                
                // Download manual
                document.getElementById('downloadManual').addEventListener('click', () => {
                    this.downloadManual();
                });
                
                // Category cards
                document.querySelectorAll('.category-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const category = card.dataset.category;
                        this.filterByCategory(category);
                    });
                });
                
                // Notification click
                const notificationIcon = document.getElementById('notificationIcon');
                if (notificationIcon) {
                    notificationIcon.addEventListener('click', (e) => {
                        e.stopPropagation();
                        document.getElementById('notificationsPanel').classList.toggle('active');
                    });
                    
                    // Add keyboard support for notification icon
                    notificationIcon.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            document.getElementById('notificationsPanel').classList.toggle('active');
                        }
                    });
                }
                
                // Mark all as read
                document.getElementById('markAllRead').addEventListener('click', () => {
                    this.showToast('All notifications marked as read', 'success');
                    document.getElementById('notificationsPanel').classList.remove('active');
                });
                
                // Close notifications when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.notification-icon') && !e.target.closest('.notifications-panel')) {
                        document.getElementById('notificationsPanel').classList.remove('active');
                    }
                });
                
                // Close modal when clicking outside
                document.getElementById('chatModal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('chatModal')) {
                        this.closeLiveChat();
                    }
                });
                
                // Close modal with Escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeLiveChat();
                    }
                });
            }
            
            // Setup offline detection
            setupOfflineDetection() {
                window.addEventListener('online', () => {
                    document.getElementById('offlineIndicator').classList.remove('active');
                    this.showToast('Connection restored', 'success');
                });
                
                window.addEventListener('offline', () => {
                    document.getElementById('offlineIndicator').classList.add('active');
                    this.showToast('You are currently offline', 'warning', 0);
                });
            }
            
            // Save help data to localStorage
            saveHelpData() {
                localStorage.setItem('fixitnow_help_data', JSON.stringify(this.helpData));
            }
            
            // Load help data from localStorage
            loadHelpData() {
                const savedData = localStorage.getItem('fixitnow_help_data');
                
                if (savedData) {
                    const data = JSON.parse(savedData);
                    Object.assign(this.helpData, data);
                }
            }
            
            // Initialize stats with animations
            initializeStats() {
                this.animateCounter(document.getElementById('resolvedIssues'), 89, 2000, '%');
                this.animateCounter(document.getElementById('avgResponseTime'), 2.4, 2000, 'm');
                this.animateCounter(document.getElementById('satisfactionRate'), 4.8, 2000, '', 0.1);
                this.animateCounter(document.getElementById('supportAgents'), 12, 1000, '');
            }
            
            // Animate counter for stats
            animateCounter(element, target, duration, suffix = '', increment = 1) {
                let start = 0;
                const timer = setInterval(() => {
                    start += increment;
                    if (start >= target) {
                        element.textContent = target + suffix;
                        clearInterval(timer);
                    } else {
                        element.textContent = start.toFixed(1) + suffix;
                    }
                }, duration / (target / increment));
            }
            
            // Render FAQ items
            renderFAQs() {
                const faqList = document.getElementById('faqList');
                faqList.innerHTML = '';
                
                // Filter FAQs by category if needed
                const filteredFAQs = this.currentCategoryFilter === "all" 
                    ? this.helpData.faqs 
                    : this.helpData.faqs.filter(faq => faq.category === this.currentCategoryFilter);
                
                if (filteredFAQs.length === 0) {
                    faqList.innerHTML = '<p>No FAQs found for this category.</p>';
                    return;
                }
                
                filteredFAQs.forEach(faq => {
                    const faqItem = document.createElement('div');
                    faqItem.className = `faq-item ${faq.viewed ? 'viewed' : ''}`;
                    faqItem.dataset.id = faq.id;
                    
                    faqItem.innerHTML = `
                        <div class="faq-question">
                            <span>${faq.question}</span>
                            <div>
                                <button class="favorite-btn ${faq.favorite ? 'active' : ''}" data-id="${faq.id}">
                                    <i class="${faq.favorite ? 'fas' : 'far'} fa-star"></i>
                                </button>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <p>${faq.answer}</p>
                        </div>
                    `;
                    
                    faqList.appendChild(faqItem);
                });
                
                // Add event listeners to FAQ items
                this.addFAQEventListeners();
            }
            
            // Render resource cards
            renderResources() {
                const resourceGrid = document.getElementById('resourceGrid');
                resourceGrid.innerHTML = '';
                
                this.helpData.resources.forEach(resource => {
                    const resourceCard = document.createElement('div');
                    resourceCard.className = 'resource-card';
                    resourceCard.dataset.id = resource.id;
                    
                    resourceCard.innerHTML = `
                        <div class="resource-icon">
                            <i class="fas fa-${resource.icon}"></i>
                        </div>
                        <h4>${resource.title}</h4>
                        <p>${resource.description}</p>
                    `;
                    
                    resourceGrid.appendChild(resourceCard);
                });
                
                // Add event listeners to resource cards
                this.addResourceEventListeners();
            }
            
            // Render knowledge base
            renderKnowledgeBase() {
                const kbCategories = document.getElementById('kbCategories');
                kbCategories.innerHTML = '';
                
                this.helpData.knowledgeBase.forEach(category => {
                    const categoryElement = document.createElement('div');
                    categoryElement.className = 'kb-category';
                    
                    let articlesHTML = '';
                    category.articles.forEach(article => {
                        articlesHTML += `
                            <div class="kb-article" data-article="${article.title}">
                                <i class="fas fa-file-alt"></i>
                                <span>${article.title}</span>
                            </div>
                        `;
                    });
                    
                    categoryElement.innerHTML = `
                        <h4><i class="fas fa-folder"></i> ${category.category}</h4>
                        <div class="kb-articles">
                            ${articlesHTML}
                        </div>
                    `;
                    
                    kbCategories.appendChild(categoryElement);
                });
                
                // Add event listeners to knowledge base articles
                this.addKBEventListeners();
            }
            
            // Render support agents
            renderSupportAgents() {
                const supportAgentsContainer = document.getElementById('supportAgents');
                supportAgentsContainer.innerHTML = '';
                
                this.helpData.supportAgents.forEach(agent => {
                    const agentCard = document.createElement('div');
                    agentCard.className = 'agent-card';
                    
                    agentCard.innerHTML = `
                        <div class="agent-avatar">${agent.name.split(' ').map(n => n[0]).join('')}</div>
                        <h4>${agent.name}</h4>
                        <p>${agent.role}</p>
                        <div class="agent-status ${agent.status}">${agent.status.charAt(0).toUpperCase() + agent.status.slice(1)}</div>
                    `;
                    
                    supportAgentsContainer.appendChild(agentCard);
                });
            }
            
            // Render help history
            renderHelpHistory() {
                const historyList = document.getElementById('helpHistory');
                historyList.innerHTML = '';
                
                if (this.helpData.helpHistory.length === 0) {
                    historyList.innerHTML = '<p>No recent help items viewed.</p>';
                    return;
                }
                
                this.helpData.helpHistory.slice(0, 5).forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <i class="fas fa-history"></i>
                        <span>${item.title}</span>
                    `;
                    historyList.appendChild(historyItem);
                });
            }

            // Render favorites
            renderFavorites() {
                const favoritesList = document.getElementById('favoritesList');
                favoritesList.innerHTML = '';
                
                const favoriteFAQs = this.helpData.faqs.filter(faq => faq.favorite);
                const favoriteResources = this.helpData.resources.filter(resource => resource.favorite);
                
                if (favoriteFAQs.length === 0 && favoriteResources.length === 0) {
                    favoritesList.innerHTML = '<p>No favorites yet. Click the star icon on any FAQ to add it to favorites.</p>';
                    return;
                }
                
                [...favoriteFAQs, ...favoriteResources].forEach(item => {
                    const favoriteItem = document.createElement('div');
                    favoriteItem.className = 'history-item';
                    favoriteItem.innerHTML = `
                        <i class="fas fa-star" style="color: var(--warning)"></i>
                        <span>${item.question || item.title}</span>
                    `;
                    favoritesList.appendChild(favoriteItem);
                });
            }
            
            // Add FAQ event listeners
            addFAQEventListeners() {
                const faqItems = document.querySelectorAll('.faq-item');
                
                faqItems.forEach(item => {
                    const question = item.querySelector('.faq-question');
                    const favoriteBtn = item.querySelector('.favorite-btn');
                    const faqId = parseInt(item.dataset.id);
                    
                    // Toggle FAQ answer
                    question.addEventListener('click', (e) => {
                        if (!e.target.closest('.favorite-btn')) {
                            item.classList.toggle('active');
                            this.markAsViewed(faqId);
                        }
                    });
                    
                    // Toggle favorite
                    favoriteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleFavorite(faqId);
                    });
                });
            }
            
            // Add resource event listeners
            addResourceEventListeners() {
                const resourceCards = document.querySelectorAll('.resource-card');
                
                resourceCards.forEach(card => {
                    card.addEventListener('click', () => {
                        const resourceId = parseInt(card.dataset.id);
                        const resource = this.helpData.resources.find(r => r.id === resourceId);
                        
                        this.showToast(`Opening: ${resource.title}`, 'info');
                        this.addToHistory(resource.title, 'resource');
                    });
                });
            }
            
            // Add knowledge base event listeners
            addKBEventListeners() {
                const kbArticles = document.querySelectorAll('.kb-article');
                
                kbArticles.forEach(article => {
                    article.addEventListener('click', () => {
                        const articleTitle = article.dataset.article;
                        this.showToast(`Loading article: ${articleTitle}`, 'info');
                        this.addToHistory(articleTitle, 'kb_article');
                    });
                });
            }
            
            // Handle search functionality
            handleSearch(query) {
                const suggestions = document.getElementById('searchSuggestions');
                
                if (query.length < 2) {
                    suggestions.classList.remove('active');
                    this.clearHighlights();
                    return;
                }
                
                // Filter FAQs and resources based on query
                const faqResults = this.helpData.faqs.filter(faq => 
                    faq.question.toLowerCase().includes(query.toLowerCase()) ||
                    faq.answer.toLowerCase().includes(query.toLowerCase())
                );
                
                const resourceResults = this.helpData.resources.filter(resource =>
                    resource.title.toLowerCase().includes(query.toLowerCase()) ||
                    resource.description.toLowerCase().includes(query.toLowerCase())
                );
                
                // Show suggestions
                if (faqResults.length > 0 || resourceResults.length > 0) {
                    suggestions.innerHTML = '';
                    
                    [...faqResults, ...resourceResults].slice(0, 5).forEach(item => {
                        const suggestionItem = document.createElement('div');
                        suggestionItem.className = 'suggestion-item';
                        suggestionItem.textContent = item.question || item.title;
                        suggestionItem.addEventListener('click', () => {
                            document.getElementById('helpSearch').value = item.question || item.title;
                            suggestions.classList.remove('active');
                            this.performSearch(item.question || item.title);
                        });
                        suggestions.appendChild(suggestionItem);
                    });
                    
                    suggestions.classList.add('active');
                } else {
                    suggestions.classList.remove('active');
                }
                
                // Highlight search results in current view
                this.highlightSearchResults(query);
            }
            
            // Perform search and show results
            performSearch(query) {
                // Switch to FAQ tab for results
                document.querySelector('[data-tab="faq"]').click();
                
                // Filter and highlight FAQs
                const faqItems = document.querySelectorAll('.faq-item');
                let hasResults = false;
                
                faqItems.forEach(item => {
                    const question = item.querySelector('.faq-question span').textContent;
                    const answer = item.querySelector('.faq-answer p').textContent;
                    
                    if (question.toLowerCase().includes(query.toLowerCase()) || 
                        answer.toLowerCase().includes(query.toLowerCase())) {
                        item.style.display = 'block';
                        item.classList.add('highlight');
                        hasResults = true;
                        
                        // Auto-expand to show results
                        item.classList.add('active');
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                if (!hasResults) {
                    document.getElementById('faqList').innerHTML = 
                        '<p>No results found for "' + query + '". Try different keywords or contact support.</p>';
                }
            }
            
            // Highlight search results
            highlightSearchResults(query) {
                this.clearHighlights();
                
                if (query.length < 2) return;
                
                const faqItems = document.querySelectorAll('.faq-item');
                const regex = new RegExp(query, 'gi');
                
                faqItems.forEach(item => {
                    const questionElement = item.querySelector('.faq-question span');
                    const answerElement = item.querySelector('.faq-answer p');
                    
                    const questionText = questionElement.textContent;
                    const answerText = answerElement.textContent;
                    
                    if (questionText.match(regex)) {
                        const highlightedQuestion = questionText.replace(regex, 
                            match => `<span class="search-highlight">${match}</span>`);
                        questionElement.innerHTML = highlightedQuestion;
                        item.classList.add('highlight');
                    }
                    
                    if (answerText.match(regex)) {
                        const highlightedAnswer = answerText.replace(regex, 
                            match => `<span class="search-highlight">${match}</span>`);
                        answerElement.innerHTML = highlightedAnswer;
                        item.classList.add('highlight');
                        item.classList.add('active'); // Auto-expand to show highlighted answer
                    }
                });
            }
            
            // Clear search highlights
            clearHighlights() {
                const highlightedItems = document.querySelectorAll('.faq-item.highlight');
                highlightedItems.forEach(item => {
                    item.classList.remove('highlight');
                    item.style.display = 'block';
                });
                
                const highlightedElements = document.querySelectorAll('.search-highlight');
                highlightedElements.forEach(element => {
                    const parent = element.parentNode;
                    parent.replaceChild(document.createTextNode(element.textContent), element);
                    parent.normalize();
                });
            }
            
            // Mark FAQ as viewed
            markAsViewed(faqId) {
                const faq = this.helpData.faqs.find(f => f.id === faqId);
                if (faq && !faq.viewed) {
                    faq.viewed = true;
                    this.addToHistory(faq.question, 'faq');
                    this.saveHelpData();
                }
            }
            
            // Toggle FAQ favorite
            toggleFavorite(faqId) {
                const faq = this.helpData.faqs.find(f => f.id === faqId);
                if (faq) {
                    faq.favorite = !faq.favorite;
                    this.saveHelpData();
                    this.renderFAQs();
                    this.renderFavorites();
                    
                    const message = faq.favorite ? 'Added to favorites' : 'Removed from favorites';
                    this.showToast(message, 'success');
                }
            }
            
            // Add item to help history
            addToHistory(title, type) {
                const historyItem = {
                    title,
                    type,
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString()
                };
                
                // Remove if already exists
                this.helpData.helpHistory = this.helpData.helpHistory.filter(
                    item => item.title !== title
                );
                
                // Add to beginning
                this.helpData.helpHistory.unshift(historyItem);
                
                // Keep only last 10 items
                if (this.helpData.helpHistory.length > 10) {
                    this.helpData.helpHistory = this.helpData.helpHistory.slice(0, 10);
                }
                
                this.saveHelpData();
                this.renderHelpHistory();
            }
            
            // Filter by category
            filterByCategory(category) {
                this.currentCategoryFilter = category;
                this.renderFAQs();
                
                // Update UI to show active category
                document.querySelectorAll('.category-card').forEach(card => {
                    card.style.borderColor = card.dataset.category === category ? 
                        'var(--primary)' : '#e0e0e0';
                });
                
                this.showToast(`Showing ${category} FAQs`, 'info');
            }
            
            // Open live chat
            openLiveChat() {
                document.getElementById('chatModal').classList.add('active');
                document.getElementById('chatInput').focus();
                
                // Add welcome message if chat is empty
                const chatMessages = document.getElementById('chatMessages');
                if (chatMessages.children.length === 1) {
                    this.addChatMessage('Hello! Thank you for contacting FixItNow support. How can I help you today?', 'bot');
                }
            }
            
            // Close live chat
            closeLiveChat() {
                document.getElementById('chatModal').classList.remove('active');
                document.getElementById('chatInput').value = '';
            }
            
            // Send chat message
            sendChatMessage() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                
                if (message === '') return;
                
                // Add user message
                this.addChatMessage(message, 'user');
                input.value = '';
                
                // Show typing indicator
                this.showTypingIndicator();
                
                // Simulate bot response after delay
                setTimeout(() => {
                    this.hideTypingIndicator();
                    this.generateBotResponse(message);
                }, 1500);
            }
            
            // Add message to chat
            addChatMessage(message, sender) {
                const chatMessages = document.getElementById('chatMessages');
                const messageElement = document.createElement('div');
                messageElement.className = `chat-message ${sender}`;
                
                messageElement.innerHTML = `
                    <div class="message-bubble">${message}</div>
                `;
                
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Show typing indicator
            showTypingIndicator() {
                const chatMessages = document.getElementById('chatMessages');
                const typingElement = document.createElement('div');
                typingElement.className = 'chat-message';
                typingElement.id = 'typing-indicator';
                
                typingElement.innerHTML = `
                    <div class="message-bubble">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                `;
                
                chatMessages.appendChild(typingElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Hide typing indicator
            hideTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }
            
            // Generate bot response
            generateBotResponse(userMessage) {
                let response = "I understand you're looking for help. Let me connect you with a support agent who can assist you further.";
                
                const lowerMessage = userMessage.toLowerCase();
                
                if (lowerMessage.includes('billing') || lowerMessage.includes('payment') || lowerMessage.includes('invoice')) {
                    response = "I can help with billing questions. Our billing department is available Monday-Friday 9AM-5PM. Would you like me to schedule a callback from our billing specialist?";
                } else if (lowerMessage.includes('service') || lowerMessage.includes('booking') || lowerMessage.includes('schedule')) {
                    response = "For service-related questions, I can check available time slots or help reschedule an existing appointment. What specific service do you need assistance with?";
                } else if (lowerMessage.includes('technical') || lowerMessage.includes('app') || lowerMessage.includes('website')) {
                    response = "I see you're having technical issues. Let me run a quick diagnostic. Have you tried updating the app or clearing your browser cache?";
                } else if (lowerMessage.includes('emergency') || lowerMessage.includes('urgent')) {
                    response = "For urgent matters, I recommend calling our emergency support line at 1-800-EMERGENCY. They're available 24/7 for immediate assistance.";
                } else if (lowerMessage.includes('thank') || lowerMessage.includes('thanks')) {
                    response = "You're welcome! Is there anything else I can help you with today?";
                }
                
                this.addChatMessage(response, 'bot');
            }
            
            // Submit FAQ feedback
            submitFAQFeedback() {
                const ratingStars = document.querySelectorAll('#faqRating i');
                const feedbackText = document.getElementById('faqFeedback').value;
                
                let rating = 0;
                ratingStars.forEach(star => {
                    if (star.classList.contains('active')) {
                        rating = Math.max(rating, parseInt(star.dataset.rating));
                    }
                });
                
                if (rating === 0) {
                    this.showToast('Please select a rating', 'warning');
                    return;
                }
                
                // In a real app, you would send this to a server
                this.showToast('Thank you for your feedback!', 'success');
                
                // Reset form
                ratingStars.forEach(star => {
                    star.className = 'far fa-star';
                });
                document.getElementById('faqFeedback').value = '';
            }
            
            // Request callback
            requestCallback() {
                this.showToast('Callback requested! Our team will contact you within 30 minutes.', 'success');
                
                // Simulate scheduling
                setTimeout(() => {
                    this.showToast('Reminder: Your callback is scheduled in 25 minutes', 'info');
                }, 5000);
            }
            
            // Download manual
            downloadManual() {
                this.showToast('Downloading user manual...', 'info');
                
                // Simulate download progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 10;
                    if (progress >= 100) {
                        clearInterval(interval);
                        this.showToast('Download complete!', 'success');
                    }
                }, 200);
            }
            
            // Show toast notification
            showToast(message, type = 'info', duration = 5000) {
                const toastContainer = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                const icons = {
                    success: 'fas fa-check-circle',
                    error: 'fas fa-exclamation-circle',
                    warning: 'fas fa-exclamation-triangle',
                    info: 'fas fa-info-circle'
                };
                
                toast.innerHTML = `
                    <i class="toast-icon ${icons[type]}"></i>
                    <div class="toast-content">
                        <div class="toast-message">${message}</div>
                    </div>
                    <button class="toast-close">&times;</button>
                `;
                
                toastContainer.appendChild(toast);
                
                // Animate in
                setTimeout(() => toast.classList.add('show'), 100);
                
                // Close button
                toast.querySelector('.toast-close').addEventListener('click', () => {
                    this.hideToast(toast);
                });
                
                // Auto hide if not persistent
                if (duration > 0) {
                    setTimeout(() => {
                        this.hideToast(toast);
                    }, duration);
                }
            }
            
            // Hide toast notification
            hideToast(toast) {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }
            
            // Search help with specific term
            searchHelp(term) {
                document.getElementById('helpSearch').value = term;
                this.handleSearch(term);
                this.performSearch(term);
            }
            
            // Notifications functionality
            updateNotifications() {
                const notificationsList = document.getElementById('notificationsList');
                const notificationBadge = document.getElementById('notificationBadge');
                
                if (!notificationsList) return;
                
                const notifications = [
                    { 
                        id: 1, 
                        title: "Review Request", 
                        desc: "Please rate your recent service with Color Masters", 
                        time: "2 days ago", 
                        icon: "fas fa-star",
                        read: false 
                    },
                    { 
                        id: 2, 
                        title: "New Review Response", 
                        desc: "Mike Plumbing Pros responded to your review", 
                        time: "1 week ago", 
                        icon: "fas fa-comment",
                        read: false 
                    },
                    { 
                        id: 3, 
                        title: "Review Published", 
                        desc: "Your review for Electro Masters has been published", 
                        time: "2 weeks ago", 
                        icon: "fas fa-check-circle",
                        read: true 
                    }
                ];
                
                notificationsList.innerHTML = '';
                
                const unreadCount = notifications.filter(n => !n.read).length;
                if (notificationBadge) notificationBadge.textContent = unreadCount;
                
                if (notifications.length === 0) {
                    notificationsList.innerHTML = '<div class="no-notifications">No notifications</div>';
                    return;
                }
                
                notifications.forEach(notification => {
                    const notificationItem = document.createElement('div');
                    notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                    notificationItem.innerHTML = `
                        <div class="notification-icon-small">
                            <i class="${notification.icon}"></i>
                        </div>
                        <div class="notification-content">
                            <div class="notification-title">${notification.title}</div>
                            <div class="notification-desc">${notification.desc}</div>
                            <div class="notification-time">${notification.time}</div>
                        </div>
                    `;
                    notificationItem.addEventListener('click', () => {
                        this.showToast(`Notification: ${notification.title}`, 'success');
                        document.getElementById('notificationsPanel').classList.remove('active');
                    });
                    notificationsList.appendChild(notificationItem);
                });
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.helpApp = new HelpSupportApp();
            
            // Add CSS for typing indicator
            const style = document.createElement('style');
            style.textContent = `
                .typing-dots {
                    display: inline-flex;
                    gap: 3px;
                }
                
                .typing-dots span {
                    height: 8px;
                    width: 8px;
                    background: #666;
                    border-radius: 50%;
                    animation: typing 1.4s infinite ease-in-out;
                }
                
                .typing-dots span:nth-child(1) { animation-delay: 0s; }
                .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
                .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
                
                @keyframes typing {
                    0%, 60%, 100% { transform: translateY(0); }
                    30% { transform: translateY(-5px); }
                }
                
                .menu-toggle {
                    transition: var(--transition);
                }
                
                .menu-toggle:hover {
                    transform: scale(1.1);
                }
                
                .notification-icon {
                    transition: var(--transition);
                }
                
                .notification-icon:hover {
                    transform: scale(1.1);
                    background: #e9ecef;
                }
            `;
            document.head.appendChild(style);
            
            // Add auto-save indicator functionality
            const autoSaveIndicator = document.createElement('div');
            autoSaveIndicator.className = 'auto-save-indicator';
            autoSaveIndicator.innerHTML = '<i class="fas fa-check"></i> Changes saved';
            document.querySelector('.help-container').appendChild(autoSaveIndicator);
            
            // Simulate auto-save
            setInterval(() => {
                autoSaveIndicator.classList.add('show');
                setTimeout(() => {
                    autoSaveIndicator.classList.remove('show');
                }, 2000);
            }, 30000);
        });

        // Add service worker for offline functionality (simulated)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // In a real application, you would register a service worker here
                console.log('Service Worker would be registered here for offline functionality');
            });
        }

        // Add error boundary for JavaScript errors
        window.addEventListener('error', function(e) {
            console.error('Application error:', e.error);
            // In a production app, you would send this to an error tracking service
        });

        // Add page visibility detection for resource optimization
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                console.log('Page is hidden - optimizing resources');
            } else {
                console.log('Page is visible');
            }
        });

        // Add beforeunload event for unsaved changes
        window.addEventListener('beforeunload', function(e) {
            // In a real app, you would check for unsaved changes
            // const unsavedChanges = false;
            // if (unsavedChanges) {
            //     e.preventDefault();
            //     e.returnValue = '';
            // }
        });
    </script>
</body>
</html>